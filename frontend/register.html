<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Register</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="center">
      <h1>Register</h1>

      <div id="messages"></div>
        
      <form id="register-form">
        <div class="txt_field">
          <input type="text" required name="first_name" id="first_name">
          <span></span>
          <label>First Name</label>
        </div>

        <div class="txt_field">
          <input type="text" required name="last_name" id="last_name">
          <span></span>
          <label>Last Name</label>
        </div>

        <div class="txt_field">
          <input type="text" required name="username" id="username">
          <span></span>
          <label>Username</label>
        </div>

        <div class="txt_field">
          <input type="email" required name="email" id="email">
          <span></span>
          <label>Email</label>
        </div>

        <div class="txt_field">
          <input type="password" required name="password" id="password">
          <span></span>
          <label>Password</label>
        </div>    

        <input type="submit" value="Register">
        <div class="signup_link">
          Already have an account? <a href="login.html">Login</a>
        </div>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      document.getElementById('register-form').addEventListener('submit', function(event) {
        event.preventDefault();

        const first_name = document.getElementById('first_name').value;
        const last_name = document.getElementById('last_name').value;
        const username = document.getElementById('username').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        axios.post('http://127.0.0.1:8000/signup/', { first_name, last_name, username, email, password })
          .then(response => {
            window.location.href = 'login.html';
          })
          .catch(error => {
            document.getElementById('messages').innerHTML = '<center><h4 style="color: firebrick;">Error registering user</h4></center>';
          });
      });
    </script>
  </body>
</html>